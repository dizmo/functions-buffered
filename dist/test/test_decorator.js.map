{"version":3,"sources":["test_decorator.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","exports","chai_1","require","lib_1","describe","it","expect","buffered","decorator","to","not","be","an","a","Class","eq","Function","prototype","fn","bind","Accumulator","n","acc","id","setInterval","setTimeout","clearInterval","t","dt","Date","getTime","p","res","Error","toString","err","name","message","cancel"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* tslint:disable:max-classes-per-file */\nconst chai_1 = require(\"chai\");\nconst lib_1 = require(\"../lib\");\nrequire(\"@babel/polyfill\");\nrequire(\"mocha\");\ndescribe(\"buffered.decorator\", () => {\n    it(\"should exist\", () => {\n        chai_1.expect(lib_1.buffered.decorator).to.not.be.an(\"undefined\");\n    });\n    it(\"should be a function\", () => {\n        chai_1.expect(lib_1.buffered.decorator).to.be.a(\"function\");\n    });\n});\ndescribe(\"buffered.decorator\", () => {\n    it(\"should return a buffered function\", () => {\n        class Class {\n            fn() {\n                chai_1.expect(true).to.eq(true);\n            }\n        }\n        __decorate([\n            lib_1.buffered.decorator,\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", []),\n            __metadata(\"design:returntype\", void 0)\n        ], Class.prototype, \"fn\", null);\n        chai_1.expect(new Class().fn).to.be.a(\"function\");\n    });\n    it(\"should preserve `this` correctly\", (done) => {\n        class Class {\n            fn() {\n                chai_1.expect(this).to.be.an(\"object\");\n                chai_1.expect(this instanceof Class).to.eq(true);\n                done();\n            }\n        }\n        __decorate([\n            lib_1.buffered.decorator(0),\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", []),\n            __metadata(\"design:returntype\", void 0)\n        ], Class.prototype, \"fn\", null);\n        new Class().fn();\n    });\n    it(\"should preserve `this` correctly\", (done) => {\n        class Class {\n            fn() {\n                chai_1.expect(this).to.be.an(\"object\");\n                chai_1.expect(this.key).to.eq(true);\n                done();\n            }\n        }\n        __decorate([\n            lib_1.buffered.decorator(0),\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", []),\n            __metadata(\"design:returntype\", void 0)\n        ], Class.prototype, \"fn\", null);\n        new Class().fn.bind({ key: true })();\n    });\n    it(\"should buffer invocations\", (done) => {\n        class Accumulator {\n            constructor() {\n                this.n = 0;\n            }\n            fn() {\n                this.n += 1;\n            }\n        }\n        __decorate([\n            lib_1.buffered.decorator(5),\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", []),\n            __metadata(\"design:returntype\", void 0)\n        ], Accumulator.prototype, \"fn\", null);\n        const acc = new Accumulator();\n        chai_1.expect(acc.n).to.eq(0);\n        chai_1.expect(acc.fn).to.be.a(\"function\");\n        const id = setInterval(() => {\n            chai_1.expect(acc.n).to.eq(0);\n            acc.fn();\n            acc.fn();\n            acc.fn();\n            chai_1.expect(acc.n).to.eq(0);\n        }, 1);\n        setTimeout(() => {\n            chai_1.expect(acc.n).to.eq(0);\n            clearInterval(id);\n            chai_1.expect(acc.n).to.eq(0);\n            setTimeout(() => {\n                chai_1.expect(acc.n).to.eq(0);\n            }, 1);\n            chai_1.expect(acc.n).to.eq(0);\n            setTimeout(() => {\n                chai_1.expect(acc.n).to.eq(1);\n                done();\n            }, 5);\n            chai_1.expect(acc.n).to.eq(0);\n        }, 5);\n    });\n    it(\"should forward arguments\", (done) => {\n        class Class {\n            fn(t) {\n                const dt = new Date().getTime() - t.getTime();\n                chai_1.expect(dt >= 0).to.eq(true);\n                done();\n            }\n        }\n        __decorate([\n            lib_1.buffered.decorator(1),\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", [Date]),\n            __metadata(\"design:returntype\", void 0)\n        ], Class.prototype, \"fn\", null);\n        new Class().fn(new Date());\n    });\n    it(\"should return a promise\", (done) => {\n        class Class {\n            fn(t) {\n                return __awaiter(this, void 0, void 0, function* () {\n                    return new Date().getTime() - t.getTime();\n                });\n            }\n        }\n        __decorate([\n            lib_1.buffered.decorator(1),\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", [Date]),\n            __metadata(\"design:returntype\", Promise)\n        ], Class.prototype, \"fn\", null);\n        const p = new Class().fn(new Date());\n        chai_1.expect(p).to.be.a(\"Promise\");\n        p.then((res) => {\n            chai_1.expect(res).to.be.a(\"number\");\n            chai_1.expect(res >= 0).to.eq(true);\n            throw new Error(res.toString());\n        }).catch((err) => {\n            chai_1.expect(err.name).to.eq(\"Error\");\n            chai_1.expect(err.message).to.be.a(\"string\");\n            chai_1.expect(err.message >= \"0\").to.eq(true);\n        });\n        setTimeout(done, 1);\n    });\n    it(\"should await a result\", () => __awaiter(this, void 0, void 0, function* () {\n        class Class {\n            fn(t) {\n                return __awaiter(this, void 0, void 0, function* () {\n                    return new Date().getTime() - t.getTime();\n                });\n            }\n        }\n        __decorate([\n            lib_1.buffered.decorator(1),\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", [Date]),\n            __metadata(\"design:returntype\", Promise)\n        ], Class.prototype, \"fn\", null);\n        const dt = yield new Class().fn(new Date());\n        chai_1.expect(dt).to.be.a(\"number\");\n        chai_1.expect(dt >= 0).to.eq(true);\n    }));\n    it(\"should return a cancelable function\", () => {\n        class Class {\n            fn() {\n                chai_1.expect(true).to.eq(false);\n            }\n        }\n        __decorate([\n            lib_1.buffered.decorator,\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", []),\n            __metadata(\"design:returntype\", void 0)\n        ], Class.prototype, \"fn\", null);\n        chai_1.expect((new Class().fn)).to.be.a(\"function\");\n        chai_1.expect(new Class().fn.cancel).to.be.a(\"function\");\n    });\n    it(\"should cancel invocations\", () => {\n        class Class {\n            fn() {\n                chai_1.expect(true).to.eq(false);\n            }\n        }\n        __decorate([\n            lib_1.buffered.decorator,\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", []),\n            __metadata(\"design:returntype\", void 0)\n        ], Class.prototype, \"fn\", null);\n        const c = new Class();\n        c.fn();\n        c.fn();\n        c.fn();\n        c.fn.cancel();\n    });\n});\n"],"file":"test_decorator.js"}